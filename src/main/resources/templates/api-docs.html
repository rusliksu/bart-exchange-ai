<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BartExchangeAI - API Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet">
</head>
<body>
    <div th:replace="fragments/navbar :: navbar"></div>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <h1><i class="fas fa-book text-primary"></i> API Documentation</h1>
                <p class="text-muted">REST API endpoints for BartExchangeAI platform</p>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="accordion" id="apiAccordion">
                    
                    <!-- Users API -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="usersHeader">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#usersCollapse">
                                <i class="fas fa-users text-primary me-2"></i> Users API
                            </button>
                        </h2>
                        <div id="usersCollapse" class="accordion-collapse collapse show" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                                <th>Example</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/users</code></td>
                                                <td>Get all users</td>
                                                <td><a href="/api/users" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/users/{id}</code></td>
                                                <td>Get user by ID</td>
                                                <td><a href="/api/users/1" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/users/username/{username}</code></td>
                                                <td>Get user by username</td>
                                                <td><a href="/api/users/username/alice" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">POST</span></td>
                                                <td><code>/api/users</code></td>
                                                <td>Create new user</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#userCreateExample">
                                                        Show JSON
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="collapse" id="userCreateExample">
                                    <div class="card card-body">
                                        <h6>POST /api/users - Request Body:</h6>
                                        <pre><code class="language-json">{
  "username": "newuser",
  "email": "newuser@example.com",
  "rating": 0.0
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Categories API -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="categoriesHeader">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#categoriesCollapse">
                                <i class="fas fa-tags text-success me-2"></i> Categories API
                            </button>
                        </h2>
                        <div id="categoriesCollapse" class="accordion-collapse collapse" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                                <th>Example</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/categories</code></td>
                                                <td>Get all categories</td>
                                                <td><a href="/api/categories" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/categories/{id}</code></td>
                                                <td>Get category by ID</td>
                                                <td><a href="/api/categories/1" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">POST</span></td>
                                                <td><code>/api/categories</code></td>
                                                <td>Create new category</td>
                                                <td>JSON: <code>{"name": "New Category"}</code></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Offers API -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="offersHeader">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#offersCollapse">
                                <i class="fas fa-gift text-warning me-2"></i> Offers API
                            </button>
                        </h2>
                        <div id="offersCollapse" class="accordion-collapse collapse" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                                <th>Example</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/offers</code></td>
                                                <td>Get all offers</td>
                                                <td><a href="/api/offers" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/offers/active</code></td>
                                                <td>Get active offers</td>
                                                <td><a href="/api/offers/active" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/offers/search?keyword={keyword}</code></td>
                                                <td>Search offers</td>
                                                <td><a href="/api/offers/search?keyword=MacBook" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/offers/user/{userId}</code></td>
                                                <td>Get offers by user</td>
                                                <td><a href="/api/offers/user/1" target="_blank">Try it</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Exchanges API -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="exchangesHeader">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#exchangesCollapse">
                                <i class="fas fa-handshake text-info me-2"></i> Exchanges API
                            </button>
                        </h2>
                        <div id="exchangesCollapse" class="accordion-collapse collapse" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                                <th>Example</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/exchanges</code></td>
                                                <td>Get all exchanges</td>
                                                <td><a href="/api/exchanges" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">GET</span></td>
                                                <td><code>/api/exchanges/user/{userId}</code></td>
                                                <td>Get exchanges by user</td>
                                                <td><a href="/api/exchanges/user/1" target="_blank">Try it</a></td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-warning">PUT</span></td>
                                                <td><code>/api/exchanges/complete/{id}</code></td>
                                                <td>Complete exchange</td>
                                                <td>Updates status to COMPLETED</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <div class="alert alert-info">
                    <h5><i class="fas fa-info-circle"></i> Testing with cURL</h5>
                    <p>You can test the API endpoints using cURL commands:</p>
                    <pre><code class="language-bash"># Get all users
curl -X GET http://localhost:8080/api/users

# Create a new user
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","email":"test@example.com","rating":0.0}'

# Search offers
curl -X GET "http://localhost:8080/api/offers/search?keyword=MacBook"</code></pre>
                </div>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-12">
                <a href="/web" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>